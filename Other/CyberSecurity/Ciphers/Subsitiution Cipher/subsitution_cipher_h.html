<!DOCTYPE html>
<html>
<head>
  <style>
    .keyboard { display: flex; flex-wrap: wrap; max-width: 400px; margin: 20px auto; }
    .key { width: 40px; height: 60px; margin: 5px; text-align: center; padding-top: 10px;
           background: #eee; border: 1px solid #ccc; cursor: pointer; font-family: monospace; }
    .selected { background: lightblue; }
    .conflict { background: lightcoral; }
  </style>
</head>
<body>
  <h2>Substitution Cipher Mapper</h2>
  <div class="keyboard" id="sourceKeys"></div>
  <hr>
  <div class="keyboard" id="targetKeys"></div>

  <script>
    const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    const mapping = {};
    let selected = null;

    function createKeyboard(id, clickHandler) {
      const container = document.getElementById(id);
      alphabet.split('').forEach(letter => {
        const div = document.createElement('div');
        div.className = "key";
        div.textContent = letter;
        div.onclick = () => clickHandler(div, letter);
        container.appendChild(div);
      });
    }

    function handleSourceClick(el, letter) {
      document.querySelectorAll('.key').forEach(k => k.classList.remove('selected'));
      el.classList.add('selected');
      selected = letter;
    }

    function handleTargetClick(el, letter) {
      if (!selected) return alert("Select a source letter first!");
      if (Object.values(mapping).includes(letter)) {
        el.classList.add('conflict');
        return;
      }
      mapping[selected] = letter;
      updateUI();
      selected = null;
    }

    function updateUI() {
      document.querySelectorAll('#sourceKeys .key').forEach(el => {
        const letter = el.textContent;
        el.innerHTML = `${letter}<br>â†’ ${mapping[letter] || '_'}`;
        el.classList.remove('selected');
      });
      document.querySelectorAll('#targetKeys .key').forEach(el => el.classList.remove('conflict'));
    }

    createKeyboard("sourceKeys", handleSourceClick);
    createKeyboard("targetKeys", handleTargetClick);
  </script>
</body>
</html>
